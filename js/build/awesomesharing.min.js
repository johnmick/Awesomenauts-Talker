(function(){var k;(function(){var i=0,j=0,g;k=function(a,b){g=a;k.awesomesounds=o(function(){function d(p,q){for(var l=b.CHARACTERS[p].PHRASES,m=l.length-1;m>-1;m--)if(l[m].TXT===q)return l[m]}for(var e={},f=0;f<a.P.length;f++)if(e[a.P[f]]===undefined)e[a.P[f]]=d(a.C,a.P[f]);f=[];for(var h in e){i++;f.push(e[h])}e={CHARACTERS:{}};e.CHARACTERS[a.C]=b.CHARACTERS[a.C];e.CHARACTERS[a.C].PHRASES=f;return e}(),true);k.awesomeshareui=n(b.CHARACTERS[a.C],a.P);return k};k.checkLoadStatus=function(){++j==i&&
k.playSounds()};var c=undefined;k.playSounds=function(){function a(f){function h(){n.highlightNextPhrase();o.play(b,d[f].replace(/'/g,""));a(++f)}if(d[f]!==undefined)c=setTimeout(h,e[f]);else setTimeout(function(){n.reset(true)},500)}var b=g.C,d=g.P,e=g.T;c!==undefined&&clearTimeout(c);n.reset();a(0)}})();var n;(function(){var i=[],j,g=0;n=function(c,a){document.getElementById("LEFT_COLUMN").style.display="block";document.getElementById("RIGHT_COLUMN").style.display="block";document.getElementById("RIGHT_COLUMN").style.overflowX=
"auto";document.getElementById("RIGHT_COLUMN").style.height="465px";document.getElementById("PHRASES").style.width="445px";document.getElementById("PHRASES_MESSAGE").style.width="445px";document.getElementById("PORTRAIT").style.backgroundImage="url('"+c.PORTRAIT_SRC+"')";document.getElementById("VCR").style.display="block";document.getElementById("VCR").style.position="absolute";document.getElementById("VCR").style.bottom="10px";document.getElementById("VCR").style.right="10px";document.getElementById("VCR").style.width=
"400px";$("#PLAY_SHARE_BUTTON").click(k.playSounds);$("#SHARE_BUTTON").click(function(){window.location.href="./index.htm"});j=document.getElementById("PHRASES_MESSAGE");for(var b=0;b<a.length;b++){var d=document.createElement("span");d.className="PHRASE_SPAN";var e=a[b].replace(/_/g,"");d.innerHTML=b===0?'"'+e+" ":b+1===a.length?e+'."':e+" ";j.appendChild(d);i.push(d)}return n};n.highlightNextPhrase=function(){g++;if(g!==0){i[g-1].style.fontWeight="normal";i[g-1].style.color="#FFFFFF"}if(g!==i.length){i[g].style.fontWeight=
"bold";i[g].style.color="#D2FF60"}};n.reset=function(c){g=-1;if(c!==true){i[0].style.fontWeight="bold";i[0].style.color="#D2FF60"}else{i[i.length-1].style.fontWeight="normal";i[i.length-1].style.color="#FFFFFF"}}})();var o;(function(){function i(a){function b(q){var l={},m;for(m in q)l[m]=q[m];l.onload=AwesomeLoading.somethingLoaded;l.autoLoad=true;return l}if(a.UI!==undefined){j.UI={};for(var d=a.UI.SOUNDS,e=0;e<d.length;e++){var f=d[e];j.UI[f.id]=soundManager.createSound(b(f))}g=j.UI.UI_TITLE_MUSIC}for(var h in a.CHARACTERS){d=
a.CHARACTERS[h].PHRASES;j[h]={};e=a.CHARACTERS[h].THEME_SONG;e.autoLoad=true;if(c===true){e.onload=k.checkLoadStatus;e.autoPlay=true}else e.onload=AwesomeLoading.somethingLoaded;j[h].THEME=soundManager.createSound(e);for(e=0;e<d.length;e++){f=d[e];var p=f.TXT.replace(/'/g,"");if(c===true)j[h][p]=soundManager.createSound({id:h+"_"+p,url:f.SRC,autoLoad:true,volume:100,onload:k.checkLoadStatus,onfinish:function(){}});else j[h][f.TXT]=soundManager.createSound({id:h+"_"+p,url:f.SRC,autoLoad:true,volume:100,
onload:AwesomeLoading.somethingLoaded,onfinish:function(){AwesomePhrases.unhighlight(this.id.split("_")[0],this.id.split("_")[1])}})}}}var j={},g=undefined,c=false;o=function(a,b){c=b;soundManager.setup({onready:function(){i(a)}});return o};o.switchMusic=function(a){g!==undefined&&g.stop();g=j[a].THEME;g.play()};o.play=function(a,b){function d(){console.log("Unable to Find Sounds Reference to:",a,b)}if(j[a]!==undefined)j[a][b]!==undefined?j[a][b].play():d();else d()}})();soundManager.setup({url:"./swf/",
useHighPerformance:true});(function(){function i(){var c=decodeURI(window.location.href);c=c.slice(c.indexOf("?")+1).split("&");for(var a={},b={readC:function(h){return h},readP:function(h){return h.split(",")},readT:function(h){return h.split(",")}},d=0;d<c.length;d++){var e=c[d].substring(0,1).toUpperCase(),f="read"+e;if(b[f]!==undefined)a[e]=b[f](c[d].substring(2,c[d].length))}return a}function j(c,a){if(c.C===undefined||c.C===null)return"The character name parameter, 'c={character_name}', is missing";
if(a.CHARACTERS[c.C]===undefined){var b="The character name, '"+c.C+"', is not one of the valid characters:<br/>",d;for(d in a.CHARACTERS)b+="<br/>"+d;return b}if(c.P===undefined)return"Missing phrases parameter, p={phrases_list}, where<br/>'phrases_list' is a comma delimited string of phrases";else{d=c.P;var e=a.CHARACTERS[c.C].PHRASES;for(b=d.length-1;b>-1;b--){for(var f=false,h=e.length-1;h>-1;h--)if(e[h].TXT===d[b]){f=true;break}if(f===false)return"Invalid Phrase, '"+d[b]+"', Specified<br/><br/>No configuration data available for this phrase and character."}}if(c.T===
undefined)return"Missing timings parameter, t={timing_list}, where<br/>'timing_list' is a comma delimited string of times<br/>to wait between each phrase";else{d=c.T;for(b=d.length-1;b>-1;b--)if(isNaN(parseInt(d[b]))===true)return"Invalid Timing Value, '"+d[b]+"', specified.<br/><br/>All timing values must be integer numbers."}if(c.P.length!==c.T.length)return"The number of phrases, "+c.P.length+", does not match<br/>with the number of timings, "+c.T.length;return true}var g=document.getElementById("MESSAGES");
g.innerHTML="Now Loading...";$.ajax({cache:false,dataType:"json",error:function(c,a,b){g.innerHTML="Error Loading Configuration Data";console.log("Error Loading Configuration File",c,a,b)},success:function(c){g.style.display="none";var a=i(c),b=j(a,c);if(b===true)window.MyAwesomeSharing=k(a,c);else{g.style.display="block";g.innerHTML="Parameters in URL have been determined to be invalid.<br/><br/>"+b}},url:"./config/config.json"})})()})();
